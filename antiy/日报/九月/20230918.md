#### 学习

##### 快速移除元素上面的所有监听事件：

原理：将原本的DOM元素替换为自身的克隆版本

```javascript
const button = document.querySelector('button);

// replace the element with a copy of itself
// and nuke all the event listeners
button.replaceWith(button.cloneNode(true));
```

参考链接：[How to remove all event listeners from a DOM element](https://www.stefanjudis.com/snippets/how-to-remove-all-event-listeners-from-a-dom-element/)

使用`AbortController()`，需要考虑的是浏览器的兼容性

```javascript
const button = document.getElementById('button');
const controller = new AbortController();
const { signal } = controller;

button.addEventListener('click', () => console.log('clicked!'), { signal });

// Remove the listener!
controller.abort();
```

<img src="/Users/sundong/Library/Application Support/typora-user-images/image-20230922092957854.png" alt="image-20230922092957854" style="zoom:70%;" />

##### 快速实现网站置灰方式：

1. `filter`

   ```css
   // 方式1
   html {
       filter: grayscale(.95);
       -webkit-filter: grayscale(.95);
   }
   
   // 方式2
   <div>
   // ...
   </div>
   
   <svg xmlns="https://www.w3.org/2000/svg">
     <filter id="grayscale">
       <feColorMatrix type="matrix" values="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"/>
       </filter>
   </svg>
   
   html {
       filter: url(#grayscale);
   }
   
   ```

   

2. `backdrop-filter`

   ```css
   html {
       position: relative;
       width: 100%;
       height: 100%;
       overflow: scroll;
   }
   html::before {
       content: "";
       position: absolute;
       inset: 0;
       backdrop-filter: grayscale(95%);
       z-index: 10;
       pointer-events: none;  // 确保页面事件可以正常使用
   }
   
   ```

   

3. `mix-blend-mode` 和 `background-blend-mode`

   ```css
   html {
       position: relative;
       width: 100%;
       height: 100%;
       overflow: scroll;
       background: #fff;
   }
   html::before {
       content: "";
       position: absolute;
       inset: 0;
       background: rgba(0, 0, 0, 1);
       mix-blend-mode: color;
       pointer-events: none;
       z-index: 10;
   }
   
   ```

参考链接：[除了 filter 还有什么置灰网站的方式？](https://juejin.cn/post/7172350709248032804#comment)