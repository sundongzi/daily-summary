##### 环境搭建

```javascript
vue2.7
npm install vue-i18n@8
```

##### 目录

##### 语言切换

- 读取浏览器当前使用的语言

  ```vue
  const i18n = new VueI18n({
    messages,
    locale: navigator.language // 获取浏览器的语言
  })
  ```

- 存到浏览器内存中

##### 问题

- 所有的中文都要通过`$t`进行包装，但是vue2.7中没有`this.$t`
- `$te('table', '列表1')`判断是否存在
- 打包问题，每次修改都需要重新编辑？
- 样式问题：比如表单label，中文和英文长度不同，可能会导致换行问题；表格表头文本宽度问题。。。
- 关联vuex
- SEO，通过路由实现SEO



vue2.6与vue2.7语法混合使用？

- 通过命令参数-v区分
- 通过脚本文件找到所有包含`<script setup`的文件，生成js文件
- 先通过`i18n-cli`脚本匹配非vue2.7的文件进行替换，生成translations.js文件
- 然后通过`i18n-cli`脚本同时追加`-v`参数运行，匹配vue2.7语法文件，生成translations-setup.js文件
- 最后通过脚本文件把所有值为空对象的删除
- 运行handle-setup.js文件，处理const { t } = useI18n()插入位置
- 处理除了cnsp文件夹以外的setup语法文件

```
1、it -v -c ./i18n.config.js 
2、node format-file.js translations-setup.js 去掉多余的{}对象
3、node handle-setup.js   添加 const {t} = useI18n()内容
```

- key中包含.的特殊处理
- key中以<开头的特殊处理



使用说明

1. 初始化CLI：npm i @ifreeovo/i18n-extract-cli -g
2. 生成中文简体：it -c bin/i18n.config.js
3. 生成繁体：node bin/translate-hk.js
4. 检查哪些修改的文件以及zh-CN.js文件，例如：new RegExp('[\u4E00-\u9FA5]+')会被替换

[i18n-cli](https://github.com/IFreeOvO/i18n-cli/tree/main/packages/i18n-extract-cli)

[参考链接](https://blog.csdn.net/qq_38689395/article/details/115706360)



