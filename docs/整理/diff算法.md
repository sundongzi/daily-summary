页面初始化时会生成虚拟DOM并将其保存起来，这里称为`oldVnode`；当某个数据发生变化以后，会生成新的虚拟`DOM`，称为`vnode`.

通过将`vnode`与`oldNode`进行比较，找出需要更新的地方，然后直接在对应的真实`DOM`上进行修改。

```
diff算法只会在同层级进行
深度优先算法
首位指针法

数据改变=》触发setter=》Dep.notify通知所有的watcher=》执行patch方法=》更新视图
```

```
patch方法：
1、对比是否为同类型的节点（sameVnode方法）
是的话继续深层比较
否的话，先获取其旧节点的父节点，然后把新节点添加进去，最后把旧节点删除
```

```
sameVnode方法：
1、key值是否一样
2、
```

```
updateChildren方法：
1、旧开始节点与新开始节点
2、旧结束节点与新结束节点
3、旧开始节点与新结束节点
4、旧结束节点与新开始节点
5、如果以上都不满足，则有旧节点生成map映射表。[key: index]
先判断新开始节点的key是否在映射表中，如果不在则直接插入到旧开始节点前面
如果在的话，找到对应的旧孩子节点后进行更新，但由于此时的节点下标在旧节点开始下标与旧节点结束下标之间，因此只能将其设置为undefined，而不是移动两个指针。
```



##### 参考链接

[图文并茂地来详细讲讲Vue Diff算法](https://juejin.cn/post/6971622260490797069#comment)